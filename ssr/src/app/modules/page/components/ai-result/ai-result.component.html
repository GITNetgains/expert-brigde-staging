<div class="ai-result-wrapper">

  <div *ngIf="!submittedSuccess" class="result-container">

    <h1 class="heading">
    Your search query is shared below
    </h1>

    <div class="content-container">
        <p class="subtitle-left">
        Review the query below before submitting your request
        </p>
    </div>

    <div *ngIf="error" class="error-msg content-container">{{ error }}</div>

    <div class="editor-card">
      <textarea
        [(ngModel)]="editableText"
        class="editor-box"
        placeholder="Loading..."
      ></textarea>
    </div>

  <div class="editor-card attachment-card">
    <label class="card-label">Attach File (pdf, docx, jpg, png)</label>

    <app-file-upload
        *ngIf="!auth.isLoggedin() || isClientUser"
        [options]="aiFileUploadOptions">
    </app-file-upload>

    <div *ngIf="uploadedAttachments.length > 0" class="attached-files-container">
        <p class="attached-title">Attached Files:</p>
        <div *ngFor="let file of uploadedAttachments; let i = index" class="file-badge">
            <span class="file-icon">ðŸ“„</span>
            <span class="file-name">{{ file.name }}</span>
            <button class="remove-btn" (click)="removeAttachment(i)">Ã—</button>
        </div>
    </div>
</div>

    <div class="editor-card signup-card" *ngIf="!auth.isLoggedin()">
      <!-- <div class="form-header">
        <h3>Kindly Signup to submit your query</h3>
        <p>Already Sign up? <a (click)="goToLogin()" class="link-text">Please login</a></p>
      </div> -->

      <div class="form-row">
          <div class="form-group">
              <label for="fullName">Name</label>
              <input type="text" id="fullName" [(ngModel)]="lead.name" placeholder="Enter your full name" class="form-control" />
          </div>
          <div class="form-group">
  <label for="emailAddr">Work Email</label>
  <input
    type="email"
    id="emailAddr"
    [(ngModel)]="lead.email"
    placeholder="Enter your company email address"
    class="form-control"
  />

  <!-- DOMAIN UX -->
  <div *ngIf="lead.email">
    <div class="domain-check" *ngIf="isCompanyEmail(lead.email)">
      <span class="dot"></span> valid domain
    </div>

    <div class="error" *ngIf="!isCompanyEmail(lead.email)">
      Please use your company email address
    </div>
  </div>
</div>

          <div class="form-group full-width">
              <label for="phoneNo">Phone No.</label>
              <input type="tel" id="phoneNo" [(ngModel)]="lead.phone" placeholder="Enter your phone no" class="form-control" />
           </div>
      </div>
       <!-- <div class="form-row">
           <div class="form-group full-width">
              <label for="phoneNo">Phone No.</label>
              <input type="tel" id="phoneNo" [(ngModel)]="lead.phone" placeholder="Enter your phone no" class="form-control" />
           </div>
       </div> -->
    </div>

    <div class="actions-right content-container">
      <button type="button" class="btn reset-btn" (click)="reset()">Reset</button>
      <button
  type="button"
  class="btn submit-btn"
  (click)="submit()"
  [disabled]="
    loading ||
    (!auth.isLoggedin() && !isCompanyEmail(lead.email))
  "
>

        {{ loading ?'Submit' : 'Submit' }}
      </button>
    </div>

  </div>

  <div *ngIf="submittedSuccess" class="confirmation">
    {{ confirmationText }}

    <div class="redirect-note">
  Redirecting to
  {{ auth.isLoggedin() ? 'dashboard' : 'homepage' }}
  in {{ countdown }} seconds...
</div>
  </div>
</div>

<app-blog-section></app-blog-section>
<app-make-it-happen></app-make-it-happen>
<app-policies-section></app-policies-section>
