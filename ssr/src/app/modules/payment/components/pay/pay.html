<section class="sm-padding payment-section">
  <div class="container">
    <div class="card-horizontal payment-card max-width-900 mx-auto">
      <div class="payment-header">
        <h3 *ngIf="title" class="payment-title">{{ title }}</h3>
        <h3 *ngIf="!title" class="payment-title" translate>
          Make your Payment for the  {{ targetName }},
          with Expert {{ tutorName }} 
        </h3>
      </div>

      <form
        class="payment-form"
        (ngSubmit)="buy()"
        [formGroup]="paymentForm"
      >
        <!-- Gift: recipient email only -->
        <div class="payment-gift-block" *ngIf="type === 'gift'">
          <label class="payment-label" for="emailRecipient">
            <span translate>Recipient's email</span>
          </label>
          <input
            id="emailRecipient"
            class="form-control payment-input"
            type="email"
            formControlName="emailRecipient"
            [placeholder]="'Recipient\'s email id' | translate"
            autocomplete="email"
          />
          <p
            class="payment-error"
            *ngIf="
              submitted &&
              paymentForm.get('emailRecipient')?.invalid &&
              paymentForm.get('emailRecipient')?.errors
            "
          >
            <span *ngIf="paymentForm.get('emailRecipient')?.errors?.['required']" translate>
              Please enter recipient email
            </span>
            <span *ngIf="paymentForm.get('emailRecipient')?.errors?.['email'] && !paymentForm.get('emailRecipient')?.errors?.['required']" translate>
              Email is invalid format
            </span>
          </p>
          <p class="payment-hint" *ngIf="type === 'gift'" translate>
            We'll send the booking details to this email.
          </p>
        </div>

        <div class="payment-actions">
          <button
            type="submit"
            class="btn btn-primary btn-pay-now"
            [disabled]="loading || isPayDisabled()"
          >
            <span *ngIf="!loading" translate>Pay Now</span>
            <span *ngIf="loading" class="payment-loading">
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              <span translate>Loading...</span>
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
