<div class="data-table mt-3">
  <div class="table-responsive rounded-3 border">
    <table class="table table-hover align-middle mb-0">
      <thead class="bg-light">
        <tr class="text-muted small text-uppercase fw-bold">
          <th class="ps-4 border-0 py-3">Time Period <app-sort [sortOption]="filter.sortOption" [sortBy]="'start'" (onSort)="onSort($event)"></app-sort></th>
          <th class="border-0 py-3">Schedule Days</th>
          <th class="border-0 py-3 text-center">Duration</th>
          <th class="border-0 py-3 pe-4 text-end">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="!recurring.length && !loading">
          <td colspan="4" class="text-center py-5 text-muted">No schedules found. Create one to get started!</td>
        </tr>
        
        <tr *ngFor="let item of recurring; let i = index" class="border-bottom-0">
          <td class="ps-4 py-3">
            <div class="d-flex flex-column">
              <span class="fw-bold text-dark">{{renderTime(item?.start)}} - {{renderTime(item?.end)}}</span>
              <span class="small text-muted">{{item?.range?.start | date:'shortDate'}} to {{item?.range?.end | date:'shortDate'}}</span>
            </div>
          </td>
          <td>
            <span class="badge rounded-pill bg-primary-subtle text-primary border border-primary-subtle px-3">
              {{renderDayOfWeek(item.dayOfWeek)}}
            </span>
          </td>
          <td class="text-center">
             <span class="small text-muted"><i class="fi fi-rr-refresh me-1 text-white"></i>Recurring</span>
          </td>
          <td class="pe-4 text-end">
            <ng-template #popContent>
              <div class="p-2">
                <p class="small mb-2 text-wrap">Note: Booked slots will remain.</p>
                <button class="btn btn-danger btn-sm w-100" (click)="remove(item, i)">Confirm Delete</button>
              </div>
            </ng-template>
            <button type="button" class="btn btn-icon-only btn-outline-danger border-0 rounded-circle shadow-none"
              [ngbPopover]="popContent" popoverTitle="Delete Schedule" [placement]="['left', 'auto']">
              <i class="fi fi-rr-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="mt-4 d-flex justify-content-between align-items-center">
    <span class="small text-muted">Showing {{recurring.length}} items</span>
    <ngb-pagination [collectionSize]="filter.total" [(page)]="filter.currentPage" [pageSize]="filter.pageSize"
      [maxSize]="3" (pageChange)="loadListSchedule()" class="pagination-modern">
    </ngb-pagination>
  </div>
</div>